Hey Hicham!

We've integrated your playbook (https://github.com/ansible-tmm/ssap-lab/blob/main/playbooks/aap-setup.yml) into the AAP multi-instance workshop. Now all AAP instances automatically get configured with demo content after deployment.

## What We Built

Created a new role `aap_selfservice_custom` in the collection that:
- Runs automatically after AAP instances and self-service portals are deployed
- Configures all your demo content: 3 users, 5 inventories, 5 credentials, 15 job templates
- Works for both single and multi-user deployments (tested with 3 users)
- Uses workshop `common_password` for demo users (not hardcoded `ansible123!`)
- Uses placeholder credentials (blahblahblah...) perfect for CNV demo environments

**Location:** rhpds.aap_self_service_portal/roles/aap_selfservice_custom/

## How to Update the Demo Content

You can customize the role independently without affecting other workshop components.

### Option 1: Edit Role Defaults (Recommended)

Edit `roles/aap_selfservice_custom/defaults/main.yml`:

```yaml
# Add/remove demo users
aap_selfservice_custom_users:
  - username: clouduser1
    password: "{{ aap_selfservice_custom_user_password }}"
    email: clouduser1@example.org
    first_name: Cloud
    last_name: CloudUser1
  # Add more users here...

# Add/modify job templates
aap_selfservice_custom_job_templates:
  - name: Cloud/AWS Create RHEL10 instance
    playbook: create_aws_ec2_rhel10.yml
    inventory: AWS Inventory
    credentials:
      - AWS Credentials
    labels:
      - aws
      - rhel
  # Add more templates here...

# Update SCM project if needed
aap_selfservice_custom_projects:
  - name: SelfService Demo playbooks
    scm_url: https://github.com/ansible-tmm/ssap-lab  # Your repo
    scm_branch: main  # Change branch if needed
```

### Option 2: Override in Workshop Config

If you want workshop-specific customizations without changing the role:

Edit `agnosticv/agd_v2/aap-multiinstance-workshop/common.yaml`:

```yaml
# Override project URL
aap_selfservice_custom_projects:
  - name: My Custom Project
    scm_url: https://github.com/my-org/my-playbooks
    scm_branch: dev

# Add extra job templates
aap_selfservice_custom_job_templates:
  - name: My New Template
    playbook: my_new_playbook.yml
    ...
```

## Current Demo Content

**Users:**
- clouduser1, networkuser1, rheluser1 (password: workshop common_password)

**Inventories:**
- AWS, Azure, GCP, RHEL, Network

**Credentials:**
- Placeholder values for CNV (fake AWS/Azure keys - UI demo only)

**Job Templates (15 total):**
- 5 AWS: provisioning, RHEL9/10 instances, VPC, snapshots
- 4 Network: backup, deploy, onboard, restore
- 6 RHEL: deploy apps, install NGINX, patch, start/stop service, update time

## Technical Notes

**How It Works:**
1. Workshop deploys AAP instances and saves connection info via `agnosticd_user_info`
2. Your role retrieves AAP info using `lookup('agnosticd_user_data')`
3. Role loops through all AAP instances (multi-user mode) and configures each one

**AAP 2.6 Compatibility:**
- Uses Gateway API endpoint `/api/gateway/v1/` for health checks
- Connects via Gateway route (not controller route)
- Works with self-signed certificates (CNV environment)

**Files to Edit:**
- `roles/aap_selfservice_custom/defaults/main.yml` - All demo content variables
- `roles/aap_selfservice_custom/README.md` - Full documentation

**Important:** The role is idempotent - safe to re-run, it skips resources that already exist.

## CNV Environment Reminder

Since we're running on CNV (OpenShift Virtualization), not real cloud:
- Credentials use placeholder values (blahblahblahAWSACCESSKEYID, etc.)
- Job templates will appear in AAP and the portal
- Templates won't execute against real AWS/Azure (perfect for UI demos)

Let me know if you want to add more templates or change anything! The role is yours to maintain.
