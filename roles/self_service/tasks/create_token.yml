---
- name: Create AAP OAuth token
  tags: [create_token]
  awx.awx.token:
    description: "Developer Hub token"
    scope: "write"
    state: present
    controller_host: "{{ controller_host }}"
    controller_username: "{{ controller_username }}"
    controller_password: "{{ controller_password }}"
    validate_certs: "{{ controller_verify_ssl }}"
  register: aap_token_result

- name: Debug - Show full token result structure
  debug:
    var: aap_token_result

- name: Show AAP token value
  debug:
    msg: "AAP token: {{ aap_token_result.token }}"
  when: show_token | default(false)
